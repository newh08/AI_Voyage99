# SQL 생성 AI 모델 설계서

## 개요
사용자가 입력한 자연어 질의를 **DB 메타데이터**를 기반으로 분석하여, **정확하고 적절한 SQL 쿼리**를 생성하는 AI 모델

## 목표
1. 사용자가 표현한 자연어 질의(“이번 달 구매량이 가장 많은 10명 회원” 등)를 **SQL 쿼리**로 자동 변환.  
2. **DB 메타데이터**(테이블·컬럼·관계·권한 등)를 활용하여 **정확한 JOIN** 및 **WHERE 조건** 설정.  
3. **복잡한 쿼리**(집계, 그룹화, 서브쿼리 등)도 처리 가능하도록 모델 설계.  
4. 모호하거나 비정형화된 입력에 대해서는 **오류 교정** 및 **사용자 확인 절차**로 견고성을 높임.


## 아키텍처
```
┌────────────────────────────┐
│ 1. 사용자 질의 입력            │
└────────────────────────────┘
            ↓
┌────────────────────────────┐
│ 2. 전처리 & 오류 교정          │
│   - 오탈자 교정               │
│   - 불필요한 공백 제거 등       │
└────────────────────────────┘
            ↓
┌────────────────────────────────┐
│ 3. Intent & Entity Extraction  │
│   - (a) Intent Classification  │
│   - (b) Entity/Attribute       │
│       Extraction               │
└────────────────────────────────┘
            ↓
┌────────────────────────────┐
│ 4. DB Metadata Manager     │
│   (Schema Loader)          │
│ - DB 스키마(테이블, 컬럼,      │
│   관계, 권한) 로딩 & 관리      │
│ - 엔티티 ↔ 테이블/컬럼         │
│   매핑, JOIN 정보 파악        │
└────────────────────────────┘
            ↓
┌────────────────────────────┐
│ 5. SQL Query Construction  │
│   - SELECT/FROM/WHERE      │
│   - JOIN                   │
│   - GROUP BY/HAVING        │
│   - ORDER BY/LIMIT         │
│   - 서브쿼리(필요 시)          │
└────────────────────────────┘
            ↓
┌────────────────────────────┐
│ 6. Validation & Error      │
│    Handling Layer          │
│   - SQL 구문 검사            │
│   - 권한 체크                │
│   - 매핑 실패 시 재질의        │
└────────────────────────────┘
            ↓
┌────────────────────────────┐
│ 7. 최종 SQL 출력 &           │
│    결과 조회                 │
└────────────────────────────┘
```



